<?php
$merchant_id = "MID-35874-695";
$secret = "fe36b086-250e-4728-adad-1b530bdfb00a";  // apikey
$amount = 100;
$order_id = uniqid("order_");
$currency = "EGP";
$mode = "test";
$redirect_url = "yourapp://payment-success";

$data = array(
    "merchantId" => $merchant_id,
    "amount" => $amount,
    "orderId" => $order_id,
    "currency" => $currency,
    "mode" => $mode,
    "redirectUrl" => $redirect_url
);

// توليد الـ signature
$signature = hash_hmac('sha256', json_encode($data), $secret);

// بناء رابط الدفع
$url = "https://checkout.kashier.io/?merchantId={$merchant_id}&amount={$amount}&orderId={$order_id}&currency={$currency}&mode={$mode}&redirectUrl=" . urlencode($redirect_url) . "&signature={$signature}";

echo $url;
?>
